<main class="w-dvw h-dvh">
    <div class="drawer">
        <input id="menu-drawer" type="checkbox" class="drawer-toggle" />

        <div class="drawer-content">
            <!-- Navbar -->
            <div class="navbar bg-base-100 shadow-sm">
                <div class="flex-none">
                    <label class="btn btn-square btn-ghost" for="menu-drawer">
                        <i-lucide name="menu" class="h-5 w-5"></i-lucide>
                    </label>
                </div>
                <div class="flex-1">
                    <a class="btn btn-ghost text-xl">RWR Toolbox</a>
                </div>
                <div class="flex-none gap-2">
                    <button class="btn btn-square btn-ghost" title="Theme">
                        <i-lucide name="palette" class="h-5 w-5"></i-lucide>
                    </button>
                    <button class="btn btn-square btn-ghost" title="Notifications">
                        <i-lucide name="bell" class="h-5 w-5"></i-lucide>
                    </button>
                </div>
            </div>

            <!-- Page Content -->
            <div class="p-4">
                <router-outlet></router-outlet>
            </div>
        </div>

        <!-- Sidebar Menu -->
        <div class="drawer-side">
            <label for="menu-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
            <ul class="menu bg-base-200 text-base-content min-h-full w-80 p-4">
                <!-- App Info -->
                <li class="menu-title">
                    <span class="text-lg font-bold">RWR Toolbox</span>
                </li>

                <!-- Main Menu Items -->
                @for (item of menuItems; track item.label) {
                    @if (item.divider) {
                        <li class="my-2 border-t border-base-300"></li>
                    } @else if (item.children && item.link) {
                        <!-- Item with Children (Submenu) -->
                        <li>
                            <details>
                                <summary [class.active]="isActive(item.link!)">
                                    <i-lucide [name]="item.icon" class="h-5 w-5"></i-lucide>
                                    <span>{{ item.label }}</span>
                                </summary>
                                <ul>
                                    @for (child of item.children; track child.label) {
                                        <li>
                                            <a
                                                [routerLink]="child.link!"
                                                (click)="closeDrawer()"
                                                [class.active]="isActive(child.link!)"
                                            >
                                                <i-lucide [name]="child.icon" class="h-4 w-4"></i-lucide>
                                                <span>{{ child.label }}</span>
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </details>
                        </li>
                    } @else if (!item.children && item.link && !item.divider) {
                        <!-- Simple Item (No Children) -->
                        <li>
                            <a
                                [routerLink]="item.link"
                                (click)="closeDrawer()"
                                [class.active]="isActive(item.link)"
                            >
                                <i-lucide [name]="item.icon" class="h-5 w-5"></i-lucide>
                                <span>{{ item.label }}</span>
                                @if (item.badge) {
                                    <span class="badge badge-sm">{{ item.badge }}</span>
                                }
                            </a>
                        </li>
                    }
                }

                <!-- Footer -->
                <li class="mt-auto menu-title">
                    <span class="text-xs">Â© {{ currentYear }} RWR Toolbox</span>
                </li>
            </ul>
        </div>
    </div>
</main>
