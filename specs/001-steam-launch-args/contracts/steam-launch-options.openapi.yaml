openapi: 3.0.3
info:
    title: RWR Toolbox - Steam Launch (Internal)
    version: 0.2.0
    description: |
        Internal contract used by the desktop app to launch Running with Rifles (AppID 270150)
        via Steam with optional arguments, and to provide best-effort availability checks.
servers:
    - url: http://ipc.localhost
paths:
    /steam/apps/270150/availability:
        get:
            summary: Check game availability (best-effort)
            description: Returns whether the game appears available for launch.
            responses:
                '200':
                    description: Availability returned
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AvailabilityResponse'
                '500':
                    description: Check failed
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ErrorResponse'
    /steam/apps/270150/launch:
        post:
            summary: Launch game via Steam with optional args
            description: Triggers a Steam launch request; does not modify Steam Launch Options.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/LaunchRequest'
            responses:
                '200':
                    description: Launch request triggered
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/LaunchResponse'
                '400':
                    description: Invalid request
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ErrorResponse'
                '500':
                    description: Launch failed
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ErrorResponse'
components:
    schemas:
        LaunchRequest:
            type: object
            required: [argsText]
            properties:
                argsText:
                    type: string
                    description: Argument string to pass (may be empty).
                    example: 'skip_nat_server_usage'
        LaunchResponse:
            type: object
            required: [ok]
            properties:
                ok:
                    type: boolean
                    enum: [true]
        AvailabilityResponse:
            type: object
            required: [available]
            properties:
                available:
                    type: boolean
                reasonKey:
                    type: string
                    nullable: true
                    description: i18n key when unavailable.
        ErrorResponse:
            type: object
            required: [ok, messageKey]
            properties:
                ok:
                    type: boolean
                    enum: [false]
                messageKey:
                    type: string
                details:
                    type: string
                    nullable: true
